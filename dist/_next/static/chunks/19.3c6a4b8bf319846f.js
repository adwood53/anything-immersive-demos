(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19,822],{1019:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i(5155),n=i(2115),r=i(8441),c=i.n(r);let o=e=>{let{videoSrc:t}=e,r=(0,n.useRef)(null),o=(0,n.useRef)(null),l=(0,n.useRef)(null);return(0,n.useEffect)(()=>{(async()=>{let e=r.current,t=o.current,a=l.current,n=t.getContext("2d",{alpha:!1,desynchronized:!0}),[{AlvaAR:c},{resize2cover:s,onFrame:h}]=await Promise.all([i.e(834).then(i.bind(i,7834)),i.e(165).then(i.bind(i,8165))]),d=s(a.videoWidth,a.videoHeight,e.clientWidth,e.clientHeight);t.width=e.clientWidth,t.height=e.clientHeight,a.style.width="".concat(d.width,"px"),a.style.height="".concat(d.height,"px");let u=await c.Initialize(t.width,t.height);e.appendChild(t),document.body.addEventListener("click",()=>u.reset(),!1),h(()=>{if(n.clearRect(0,0,t.width,t.height),!document.hidden){n.drawImage(a,0,0,a.videoWidth,a.videoHeight,d.x,d.y,d.width,d.height);let e=n.getImageData(0,0,t.width,t.height),i=u.findCameraPose(e);if(i){let e=new THREE.Matrix4().fromArray(i),t=new THREE.Quaternion().setFromRotationMatrix(e),a=new THREE.Vector3(i[12],i[13],i[14]),n=document.querySelector("a-camera");n.setAttribute("position","".concat(a.x," ").concat(-a.y," ").concat(-a.z));let r=new THREE.Euler().setFromQuaternion(t);n.setAttribute("rotation","".concat(-(50*r.x)," ").concat(50*r.y," ").concat(50*r.z))}else for(let e of(console.log("lost pose"),u.getFramePoints()))n.fillStyle="white",n.fillRect(e.x,e.y,2,2)}return!0},60)})().catch(e=>{console.error("Error initializing SLAM:",e)})},[t]),(0,a.jsxs)("div",{className:"".concat(c().container),ref:r,children:[(0,a.jsx)("video",{ref:l,src:t,loop:!0,autoPlay:!0,muted:!0,playsInline:!0}),(0,a.jsx)("canvas",{ref:o,style:{}})]})}},8441:e=>{e.exports={container:"DeviceCamera_container__j2VGQ",fadeIn:"DeviceCamera_fadeIn__Cr6HF",splash:"DeviceCamera_splash__bimCV",overlay:"DeviceCamera_overlay__fOsCB"}}}]);