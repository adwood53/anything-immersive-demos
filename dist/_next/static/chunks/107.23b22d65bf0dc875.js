(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[107,822],{3107:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i(5155),n=i(2115),c=i(8441),r=i.n(c);let o=()=>{let e=(0,n.useRef)(null),t=(0,n.useRef)(null);return(0,n.useEffect)(()=>{(async()=>{let a=e.current,n=t.current,c=n.getContext("2d",{alpha:!1,desynchronized:!0}),[{AlvaAR:r},{Camera:o,resize2cover:l,onFrame:h}]=await Promise.all([i.e(834).then(i.bind(i,7834)),i.e(165).then(i.bind(i,8165))]),d=(await o.Initialize({video:{facingMode:"environment",aspectRatio:16/9,width:{ideal:1280}},audio:!1})).el,s=l(d.videoWidth,d.videoHeight,a.clientWidth,a.clientHeight);n.width=a.clientWidth,n.height=a.clientHeight,d.style.width="".concat(s.width,"px"),d.style.height="".concat(s.height,"px");let u=await r.Initialize(n.width,n.height);a.appendChild(n),document.body.addEventListener("click",()=>u.reset(),!1),h(()=>{if(c.clearRect(0,0,n.width,n.height),!document.hidden){c.drawImage(d,0,0,d.videoWidth,d.videoHeight,s.x,s.y,s.width,s.height);let e=c.getImageData(0,0,n.width,n.height),t=u.findCameraPose(e);if(t){let e=new THREE.Matrix4().fromArray(t),i=new THREE.Quaternion().setFromRotationMatrix(e),a=new THREE.Vector3(t[12],t[13],t[14]),n=document.querySelector("a-camera");n.setAttribute("position","".concat(a.x," ").concat(-a.y," ").concat(-a.z)),n.setAttribute("rotation","".concat(-i.x," ").concat(i.y," ").concat(i.z))}else for(let e of u.getFramePoints())c.fillStyle="white",c.fillRect(e.x,e.y,2,2)}return!0},30)})().catch(e=>{console.error("Error initializing SLAM:",e)})},[]),(0,a.jsx)("div",{className:"".concat(r().container),ref:e,children:(0,a.jsx)("canvas",{ref:t})})}},8441:e=>{e.exports={container:"DeviceCamera_container__j2VGQ",fadeIn:"DeviceCamera_fadeIn__Cr6HF",splash:"DeviceCamera_splash__bimCV",overlay:"DeviceCamera_overlay__fOsCB"}}}]);