(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19,191],{1019:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(5155),a=i(2115),r=i(1191),c=i.n(r);let o=e=>{let{videoSrc:t}=e,r=(0,a.useRef)(null),o=(0,a.useRef)(null),l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{(async()=>{let e=r.current,t=o.current,n=l.current,a=t.getContext("2d",{alpha:!1,desynchronized:!0}),[{AlvaAR:c},{resize2cover:h,onFrame:s}]=await Promise.all([i.e(834).then(i.bind(i,7834)),i.e(165).then(i.bind(i,8165))]),d=h(n.videoWidth,n.videoHeight,e.clientWidth,e.clientHeight);t.width=e.clientWidth,t.height=e.clientHeight,n.style.width="".concat(d.width,"px"),n.style.height="".concat(d.height,"px");let u=await c.Initialize(t.width,t.height);e.appendChild(t),document.body.addEventListener("click",()=>u.reset(),!1),s(()=>{if(a.clearRect(0,0,t.width,t.height),!document.hidden){a.drawImage(n,0,0,n.videoWidth,n.videoHeight,d.x,d.y,d.width,d.height);let e=a.getImageData(0,0,t.width,t.height),i=u.findCameraPose(e);if(i){let e=new THREE.Matrix4().fromArray(i),t=new THREE.Quaternion().setFromRotationMatrix(e),n=new THREE.Vector3(i[12],i[13],i[14]),a=document.querySelector("a-camera");a.setAttribute("position","".concat(n.x," ").concat(-n.y," ").concat(-n.z));let r=new THREE.Euler().setFromQuaternion(t);a.setAttribute("rotation","".concat(-(50*r.x)," ").concat(50*r.y," ").concat(50*r.z))}else for(let e of(console.log("lost pose"),u.getFramePoints()))a.fillStyle="white",a.fillRect(e.x,e.y,2,2)}return!0},60)})().catch(e=>{console.error("Error initializing SLAM:",e)})},[t]),(0,n.jsxs)("div",{className:"".concat(c().container),ref:r,children:[(0,n.jsx)("video",{ref:l,src:t,loop:!0,autoPlay:!0,muted:!0,playsInline:!0}),(0,n.jsx)("canvas",{ref:o,style:{}})]})}},1191:e=>{e.exports={container:"DeviceCamera_container__wCIag",fadeIn:"DeviceCamera_fadeIn__uFpHV",splash:"DeviceCamera_splash__zdYnk",overlay:"DeviceCamera_overlay__n6D9R"}}}]);