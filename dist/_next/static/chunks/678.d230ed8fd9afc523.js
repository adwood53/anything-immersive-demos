"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{1601:(t,e,i)=>{i.d(e,{A:()=>a});var n=i(5155),o=i(2115);let a=function(t){let{isAR:e=!1,enableWASD:i=!1,enableLook:a=!0,position:s="0 0.4 0",raycastType:l=null}=t;return(0,o.useEffect)(()=>{if(!window.AFRAME)return;e&&!AFRAME.components["camera-background-plane"]&&AFRAME.registerComponent("camera-background-plane",{schema:{distance:{type:"number",default:-3}},init(){var t;this.video=document.createElement("video"),this.video.setAttribute("autoplay",!0),this.video.setAttribute("playsinline",!0),this.video.setAttribute("webkit-playsinline",!0);let e=()=>{if(!this.video.videoWidth)return;let t=this.el.sceneEl.camera.fov,e=Math.abs(this.data.distance),i=2*Math.tan(THREE.MathUtils.degToRad(t)/2)*e,n=i*(window.innerWidth/window.innerHeight);this.plane&&this.el.removeObject3D("mesh");let o=new THREE.PlaneGeometry(n,i),a=new THREE.MeshBasicMaterial({map:new THREE.VideoTexture(this.video),side:THREE.DoubleSide});this.plane=new THREE.Mesh(o,a),this.plane.position.z=this.data.distance,this.el.setObject3D("mesh",this.plane)};(null===(t=navigator.mediaDevices)||void 0===t?void 0:t.getUserMedia)&&navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}}).then(t=>{this.video.srcObject=t,this.video.play(),this.video.addEventListener("loadedmetadata",e)}).catch(console.error),window.addEventListener("resize",e)}});let t=()=>{let e=document.querySelector("a-camera");if(!e){console.warn("Camera entity not found, retrying..."),setTimeout(t,100);return}console.log("Camera entity found, setting up raycasting.");let i=e.querySelector("[raycaster]");i&&(i.parentNode.removeChild(i),console.log("Removed existing raycaster."));let n=document.createElement("a-entity");n.setAttribute("raycaster",{objects:".selectable",far:100,interval:100}),(null==l?void 0:l.includes("gaze"))&&(n.addEventListener("raycaster-intersection",t=>{console.log("Gaze intersection detected with:",t.detail.intersectedEls)}),n.addEventListener("raycaster-intersection-cleared",()=>{console.log("Gaze intersection cleared.")})),(null==l?void 0:l.includes("click"))&&n.addEventListener("click",t=>{console.log("Click detected on:",t.target)}),e.appendChild(n),console.log("Raycaster entity appended.")};return l&&t(),()=>{let t=document.querySelector("[raycaster]");t&&(t.parentNode.removeChild(t),console.log("Cleaned up raycaster."))}},[e,l]),(0,n.jsx)("a-camera",{position:s,"wasd-controls":"enabled: ".concat(i),"look-controls":"enabled: ".concat(a),children:e&&(0,n.jsx)("a-entity",{"camera-background-plane":"distance: -3"})})}},918:(t,e,i)=>{i.d(e,{A:()=>o});var n=i(5155);let o=function(){return(0,n.jsxs)("a-entity",{children:[(0,n.jsx)("a-entity",{id:"sun",light:"type: directional; color: #FFFFFF; intensity: 0.9; castShadow: true; shadowCameraFar: 500;   shadowCameraVisible: false;   shadowBias: -0.001;   shadowMapHeight:2048; shadowMapWidth:2048;   shadowCameraLeft: -5; shadowCameraRight: 5;   shadowCameraBottom: -5; shadowCameraTop: 5;",position:"10 50 -10"}),(0,n.jsx)("a-entity",{light:"type: hemisphere; color: #c9f6ff; groundColor: #0ba11f; intensity: 0.7"}),(0,n.jsx)("a-entity",{light:"type: point; intensity:1; color: #FFFFFF"}),(0,n.jsx)("a-entity",{light:"type: ambient; intensity:0.3; color: #FFFFFF"})]})}},1554:(t,e,i)=>{i.d(e,{A:()=>a});var n=i(5155),o=i(2115);let a=function(t){let{format:e="gltf",rotateY:i=!0,rotateZ:a=!0,position:s="0 0.5 -1",rotation:l="0 0 0",modelPosition:r="0 -0.25 0",frustumCulled:c=!0,animationEnabled:d=!1,animationClip:h="*",useRegExp:u=!1,duration:m=0,crossFadeDuration:p=0,loop:E="repeat",repetitions:y=1/0,timeScale:v=1,clampWhenFinished:g=!1,startAt:b=0,modelId:f="",assetId:R="model",mtlAssetId:w="material",selectable:A=!0}=t;(0,o.useEffect)(()=>{if(!window.AFRAME)return;AFRAME.components["disable-culling"]||AFRAME.registerComponent("disable-culling",{init(){this.el.addEventListener("model-loaded",()=>{let t=this.el.getObject3D("mesh");t&&t.traverse(t=>{t.isMesh&&(t.frustumCulled=!1)})})}}),AFRAME.components["model-control"]||AFRAME.registerComponent("model-control",{schema:{rotateY:{type:"boolean",default:!0},rotateZ:{type:"boolean",default:!0},modelId:{type:"string"},selectable:{type:"boolean",default:!0}},init(){let t=this.el.object3D.position;this.initialPosition={x:t.x,y:t.y,z:t.z},this.currentPosition={...this.initialPosition},this.touchStart={x:0,y:0},this.currentRotation={y:90,z:0},this.isRotating=!1,this.isSelected=!1,this.setupTouchEvents(),this.setupSelectionEvents(),this.updateRotation();let e=new CustomEvent("model-registered",{detail:{modelId:this.data.modelId,element:this.el}});this.el.sceneEl.dispatchEvent(e)},remove(){let t=new CustomEvent("model-unregistered",{detail:{modelId:this.data.modelId}});this.el.sceneEl.dispatchEvent(t)},setupSelectionEvents(){this.data.selectable&&(this.el.classList.add("selectable"),this.el.addEventListener("click",()=>{this.isSelected=!this.isSelected,this.el.emit("model-selection-changed",{modelId:this.data.modelId,selected:this.isSelected}),this.el.setAttribute("scale",this.isSelected?"1.1 1.1 1.1":"1 1 1")}),this.el.addEventListener("mouseenter",()=>{this.isSelected||this.el.setAttribute("scale","1.05 1.05 1.05")}),this.el.addEventListener("mouseleave",()=>{this.isSelected||this.el.setAttribute("scale","1 1 1")}))},setupTouchEvents(){let t=document.querySelector("canvas");if(!t)return;document.addEventListener("contextmenu",t=>t.preventDefault());let e=e=>{e.target===t&&(e.preventDefault(),this.isRotating=!0,this.touchStart.x="touchstart"===e.type?e.touches[0].clientX:e.clientX,this.touchStart.y="touchstart"===e.type?e.touches[0].clientY:e.clientY)},i=t=>{if(!this.isRotating)return;t.preventDefault();let e="touchmove"===t.type?t.touches[0].clientX:t.clientX,i="touchmove"===t.type?t.touches[0].clientY:t.clientY;if(this.data.rotateY){let t=e-this.touchStart.x;this.currentRotation.y+=.25*t}if(this.data.rotateZ){let t=i-this.touchStart.y;this.currentRotation.z+=.25*t}this.updateRotation(),this.touchStart.x=e,this.touchStart.y=i},n=()=>{this.isRotating=!1};t.addEventListener("touchstart",e,{passive:!1}),t.addEventListener("touchmove",i,{passive:!1}),t.addEventListener("touchend",n),t.addEventListener("mousedown",e),t.addEventListener("mousemove",i),t.addEventListener("mouseup",n)},updatePosition(t){this.currentPosition.z+=t,this.currentPosition.z=Math.max(this.initialPosition.z-1,Math.min(this.initialPosition.z+.7,this.currentPosition.z)),this.el.object3D.position.z=this.currentPosition.z},resetModel(){this.currentPosition={...this.initialPosition},this.currentRotation={y:90,z:0},this.el.object3D.position.copy(this.initialPosition),this.updateRotation()},updateRotation(){this.data.rotateY&&(this.el.object3D.rotation.y=THREE.MathUtils.degToRad(this.currentRotation.y)),this.data.rotateZ&&(this.el.object3D.rotation.z=THREE.MathUtils.degToRad(this.currentRotation.z))}}),AFRAME.components["animation-mixer-control"]||AFRAME.registerComponent("animation-mixer-control",{schema:{enabled:{type:"boolean",default:!1},clip:{type:"string",default:"*"},useRegExp:{type:"boolean",default:!1},duration:{type:"number",default:0},crossFadeDuration:{type:"number",default:0},loop:{type:"string",default:"repeat"},repetitions:{type:"number",default:1/0},timeScale:{type:"number",default:1},clampWhenFinished:{type:"boolean",default:!1},startAt:{type:"number",default:0}},init(){let t=this;this.el.addEventListener("model-loaded",function(){if(!t.data.enabled)return;let e=t.el.getObject3D("mesh");if(!e)return;let i=new THREE.AnimationMixer(e),n=e.animations||t.el.animations;if(!n)return;let o=t.data.useRegExp?new RegExp(t.data.clip):t.data.clip,a=n.filter(t=>"string"==typeof o?t.name===o:o.test(t.name));a.length&&a.forEach(e=>{let n=i.clipAction(e);n.loop="once"===t.data.loop?THREE.LoopOnce:"pingpong"===t.data.loop?THREE.LoopPingPong:THREE.LoopRepeat,n.repetitions="once"===t.data.loop?1:t.data.repetitions,n.clampWhenFinished=t.data.clampWhenFinished,n.timeScale=t.data.timeScale,n.startAt=t.data.startAt,n.play()}),t.mixer=i})},tick(t,e){this.mixer&&this.mixer.update(e/1e3)}});let t=document.querySelector("#model-container-".concat(f," [").concat("gltf"===e?"gltf-model":"obj-model","]"));t&&("obj"===e?t.setAttribute("obj-model","obj: #".concat(R,"; mtl: #").concat(w)):t.setAttribute("gltf-model","#".concat(R)))},[e,R,w,f]);let F="gltf"===e?{"gltf-model":"#".concat(R)}:{"obj-model":"obj: #".concat(R,"; mtl: #").concat(w)};return(0,n.jsx)("a-entity",{id:"model-container-".concat(f),class:"model-container",position:s,scale:"1 1 1",rotation:l,"model-control":"\n        rotateY: ".concat(i,"; \n        rotateZ: ").concat(a,"; \n        modelId: ").concat(f,";\n        selectable: ").concat(A,"\n      "),children:(0,n.jsx)("a-entity",{...F,position:r,shadow:"cast: true; receive: true","disable-culling":c?void 0:"",...d?{"animation-mixer-control":"\n            enabled: ".concat(d,"; \n            clip: ").concat(h,"; \n            useRegExp: ").concat(u,"; \n            duration: ").concat(m,"; \n            crossFadeDuration: ").concat(p,"; \n            loop: ").concat(E,"; \n            repetitions: ").concat(y,"; \n            timeScale: ").concat(v,"; \n            clampWhenFinished: ").concat(g,"; \n            startAt: ").concat(b,"\n          ")}:{}})})}},5576:(t,e,i)=>{i.d(e,{A:()=>o});var n=i(5155);let o=function(){return(0,n.jsx)("a-plane",{"follow-shadow":"#model-container",material:"shader:shadow",shadow:"cast:false;",rotation:"-90 0 0",position:"0 -0.5 -1",width:"10",height:"10"})}}}]);